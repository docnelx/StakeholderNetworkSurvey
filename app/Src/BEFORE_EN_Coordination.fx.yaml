BEFORE_EN_Coordination As screen:
    BackgroundImage: =
    Fill: =RGBA(237, 237, 237, 1)
    OnHidden: |-
        =Patch(colTimeRecorder, Last(colTimeRecorder), {End: Now()});
    OnVisible: |-
        =Set(SelectedLevel,"Coordination");
        Set(SelectedPhase,"Before");Set(_currentPage,"BEFORE_EN_Coordination");
        Set(_popup,false);Collect(colTimeRecorder,{Page: Self.Name,Start:Now(),End: ""});

    Rectangle5_28 As rectangle:
        Fill: =RGBA(255, 255, 255, 0.9)
        Height: =620
        Width: =1366
        Y: =82
        ZIndex: =1

    Rectangle5_53 As rectangle:
        Fill: =RGBA(237, 237, 237, 1)
        Height: =86
        Width: =1366
        Y: =682
        ZIndex: =2

    drpPhase_12 As dropdown:
        Height: =38
        Items: =["Before","Current"]
        Visible: =false
        Width: =77
        X: =1288
        Y: =71
        ZIndex: =7

    Image4_23 As image:
        Height: =50
        Image: =logo
        OnSelect: =Navigate(Welcome_EN,ScreenTransition.Fade)
        Width: =175
        X: =1177
        Y: =21
        ZIndex: =8

    Networking_10 As gallery.variableTemplateHeightGallery:
        BorderColor: =RGBA(0, 0, 0, 0)
        DelayItemLoading: =true
        Height: =570
        Items: |+
            =Filter(
            
            Filter(
            
            Sort(
                Ungroup(Table({MyTables: Filter(PartnersList,Not(ShortName in SelectedItems.ShortName))},
            
            {MyTables:Filter(PartnersList, ShortName in Filter(SelectedItems,GalleryName =SelectedLevel).ShortName)}), "MyTables"),ShortName,SortOrder.Ascending)
            ,ShortName<>myOrganization),Not(IsBlank(ShortName)))
            
            
            
        Layout: =Layout.Vertical
        LoadingSpinner: =LoadingSpinner.Data
        ShowScrollbar: =false
        TemplateFill: =If(ThisItem.IsSelected,   RGBA(255, 195, 15, .2), RGBA(231, 231, 231, 1))
        TemplateSize: =102
        Width: =1001
        X: =342
        Y: =93
        ZIndex: =9

        Title3_47 As label:
            AutoHeight: =true
            FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
            Height: =61
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =13
            Strikethrough: =If(IsEmpty(Filter(SelectedItems, ShortName = ThisItem.ShortName,Not(GalleryName = SelectedLevel))), false, true)
            Text: =ThisItem.LongName & Char(13) &Char(13)
            VerticalAlign: =VerticalAlign.Top
            Width: =466
            X: =53
            Y: =11
            ZIndex: =4

        CheckboxCanvas2_49 As Checkbox:
            BasePaletteColor: =
            DisplayMode: =DisplayMode.Edit
            Font: =""
            FontColor: =
            FontItalic: =false
            FontSize: =0
            FontStrikethrough: =false
            FontUnderline: =false
            FontWeight: =""
            Height: =52
            Label: =" "
            OnCheck: |-
                =
                Collect(SelectedItems, [{Organization: myOrganization,Phase:SelectedPhase, ShortName:ThisItem.ShortName,GalleryName:SelectedLevel, Concat:SelectedLevel&ThisItem.ShortName}])
            OnSelect: =Select(Parent)
            OnUncheck: =RemoveIf(SelectedItems, ShortName = ThisItem.ShortName)
            Visible: =If(IsEmpty(Filter(SelectedItems, ShortName = ThisItem.ShortName)), true, false)
            Width: =49
            X: =4
            Y: =0
            ZIndex: =5

        Checkbox1_6 As checkbox:
            BorderColor: =RGBA(0, 0, 0, 0)
            Default: =
            Height: =47
            OnCheck: |-
                =
                Set(selectedGalleryName,SelectedLevel);
                Collect(SelectedItems, [{Organization: myOrganization,Phase:drpPhase_12.Selected.Value, ShortName:ThisItem.ShortName,GalleryName:selectedGalleryName, Concat:selectedGalleryName&ThisItem.ShortName}])
            OnUncheck: =RemoveIf(SelectedItems, ShortName = ThisItem.ShortName)
            Text: =""
            Visible: |-
                =false
                //If(IsEmpty(Filter(SelectedItems, ShortName = ThisItem.ShortName)), true, false)
            Width: =49
            X: =4
            Y: =5
            ZIndex: =7

        Title3_60 As label:
            FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
            Height: =34
            OnSelect: |-
                =
                Collect(SelectedItems, [{Organization: myOrganization,Phase:SelectedPhase, ShortName:ThisItem.ShortName,GalleryName:SelectedLevel, Concat:SelectedLevel&ThisItem.ShortName}])
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =13
            Strikethrough: =If(IsEmpty(Filter(SelectedItems, ShortName = ThisItem.ShortName,Not(GalleryName = SelectedLevel))), false, true)
            Text: =ThisItem.ShortName & Char(13) &Char(13)
            VerticalAlign: =VerticalAlign.Top
            Width: =128
            X: =520
            Y: =10
            ZIndex: =8

        Checkbox1_17 As checkbox:
            BorderColor: =RGBA(0, 0, 0, 0)
            Default: =If(CountRows(Filter(SelectedItems,ShortName=ThisItem.ShortName))>0,true,false)
            Height: =52
            OnCheck: |-
                =
                Collect(SelectedItems, [{Organization: myOrganization,Phase:SelectedPhase, ShortName:ThisItem.ShortName,GalleryName:SelectedLevel, Concat:SelectedLevel&ThisItem.ShortName}])
            OnUncheck: =RemoveIf(SelectedItems, ShortName = ThisItem.ShortName)
            Text: =""
            Visible: |-
                =true
                //If(IsEmpty(Filter(SelectedItems, ShortName = ThisItem.ShortName)), true, false)
            Width: =38
            X: =4
            ZIndex: =9

    Arrow2_11 As arrow:
        Fill: =RGBA(184, 0, 0, 1)
        OnSelect: =Navigate(BEFORE_EN_Cooperation,ScreenTransition.Fade)
        X: =1301
        Y: =703
        ZIndex: =18

    Arrow1_12 As arrow.backArrow:
        Fill: =RGBA(184, 0, 0, 1)
        OnSelect: =Navigate(BEFORE_EN_Coalition)
        X: =12
        Y: =703
        ZIndex: =19

    CompositeColumnChart1_6 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =21

        Title1_6 As label:
            Align: =Align.Center
            Height: =12
            Text: ="Chart Title"
            Visible: =false
            Width: =296
            X: =1056
            Y: =257
            ZIndex: =15

        ColumnChart1_6 As barChart:
            Height: =196
            Items: =ColumnChartSample
            Visible: =false
            Width: =296
            X: =1055
            Y: =270
            ZIndex: =16

        Legend1_6 As legend:
            Height: =39
            ItemColorSet: =ColumnChart1_6.ItemColorSet
            Items: =ColumnChart1_6.SeriesLabels
            Visible: =false
            Width: =237
            X: =1085
            Y: =468
            ZIndex: =17

    Group2_6 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =26

        Rectangle1_19 As rectangle:
            Fill: =RGBA(112, 81, 3, 1)
            Height: =366
            Width: =329
            X: =12
            Y: =96
            ZIndex: =10

        Label9_6 As label:
            Color: =RGBA(255, 255, 255, 1)
            Height: =298
            Text: |-
                =If(lang="En","COORDINATION:
                
                Stakeholders who coordinate with each other also share information and resources. They have defined roles or relationship, frequently communicate and have some shared decision-making.
                
                Please, select the organizations you coordinate with from the list and click Next button.","Coordination:
                
                Les intervenants qui se coordonnent entre eux échangent également des renseignements et des ressources. 
                Ils ont des rôles ou des relations définis, communiquent fréquemment et prennent des décisions collectives.
                
                Veuillez sélectionner les organismes de la liste avec lesquels vous travaillez en coordination et cliquer sur le bouton Suivant.")
            Width: =313
            X: =20
            Y: =157
            ZIndex: =11

        Image1_12 As image:
            Height: =61
            Image: =ideas
            Width: =67
            X: =12
            Y: =96
            ZIndex: =12

    Label9_37 As label:
        Align: =Align.Center
        Height: =150
        Text: |-
            =If(lang="En","You have no stakeholder organizations available for selection. 
            
            If you believe some stakeholders fall more under this interaction category, kindly deselect from your earlier selections","Vous n’avez aucun organisme d’intervenants disponible parmi les choix. 
            
            Si vous estimez que certains intervenants relèvent davantage de cette catégorie d’interaction, veuillez les désélectionner de vos choix précédents.")
        Visible: =If(Networking_10.AllItemsCount=0,true,false)
        Width: =1015
        X: =351
        Y: =290
        ZIndex: =37

    Group9_5 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =37

        blank_18 As rectangle:
            Fill: =RGBA(255, 255, 255, 0.9)
            Height: =768
            Visible: =_popup
            Width: =1366
            ZIndex: =29

        Rectangle2_19 As rectangle:
            BorderColor: =RGBA(219, 219, 219, 1)
            BorderThickness: =1
            Fill: =RGBA(255, 255, 255, 1)
            Height: =303
            Visible: =_popup
            Width: =541
            X: =411
            Y: =195
            ZIndex: =30

        Button4_38 As button:
            Fill: =RGBA(184, 0, 0, 1)
            OnSelect: |-
                =
                ClearCollect(QDB,Filter(SNP_QuestionDatabase,Organization=myOrganization));
                
                ClearCollect(db2,ForAll(galsectionII.AllItems,{Organization: myOrganization, Title: _question.Text, AnswerIndex1: drpchanges.Selected.Value, AnswerIndex2: drpcontributions.Selected.Value}));
                
                ClearCollect(db3,ForAll(galsectionIII.AllItems,{Organization: myOrganization, Title: quest.Text, AnswerIndex1: radoption.Selected.Response, AnswerIndex2:""}));
                
                ClearCollect(db4,ForAll(galsectionIV.AllItems,{Organization: myOrganization, Title: quess.Text, AnswerIndex1: drpKP.Selected.Value, AnswerIndex2: ""}));
                ClearCollect(db5,ForAll(galsectionII_1.AllItems,{Organization: myOrganization, Title: _question_1.Text, AnswerIndex1: drpchanges_1.Selected.Value, AnswerIndex2: drpcontributions_1.Selected.Value}));
                ClearCollect(finaldbs,db2,db3,db4,db5);
                
                
                If(CountRows(QDB)=0,
                Patch(SNP_QuestionDatabase,finaldbs),
                
                ForAll(
                  galfinaldbs.AllItems,
                  With({_recordx:LookUp(QDB, Title=lblQuestion.Text)},
                    Patch(SNP_QuestionDatabase, _recordx,{AnswerIndex1:lblAnswerIndex1.Text,AnswerIndex2:lblAnswerIndex2.Text})  )
                ));
                
                //Update NetworkMap
                ClearCollect(FinalCollection,SelectedCurrentItems,SelectedItems);
                ClearCollect(MapDB,Filter(S1_SNP,Organization=myOrganization));
                
                //Patch(S1_SNP,ForAll(galfinalMapDB.AllItems,{ID:LookUp(MapDB,UniqueConcat=lblPhase.Text&lblShortName.Text,ID), GalleryName:lblInteraction.Text})));
                //Patch(S1_SNP,Filter(FinalCollection,GalleryName=SelectedLevel,Phase=SelectedPhase)
                
                Patch(S1_SNP,FinalCollection);
                /*
                If(CountRows(MapDB)=0,
                Patch(S1_SNP,FinalCollection),
                If(CountRows(Filter(MapDB,GalleryName=SelectedLevel,Phase=SelectedPhase))=0,
                Patch(S1_SNP,FinalCollection),
                ForAll(
                  galfinalMapDB.AllItems,
                  With({_record:LookUp(MapDB, UniqueConcat=lblPhase.Text&lblShortName.Text)},
                    Patch(S1_SNP, _record,{GalleryName:lblInteraction.Text})  )
                ))
                );*/
                
                
                //SNP Master Update
                
                Set(_lookupReecord,LookUp(SNP_Master,Title=myOrganization));
                
                If(IsBlank(_lookupReecord),
                
                Patch(SNP_Master,Defaults(SNP_Master),
                {Title:myOrganization,Status:{Value:"Draft"},Last_Page:_currentPage}); ,
                
                Patch(SNP_Master,_lookupReecord,{Last_Page:_currentPage}) );
                
                ClearCollect(Master,SNP_Master);
                Set(_loader,false);
                Navigate(Landing,ScreenTransition.Fade);
                Exit()
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =10
            Text: =yesText
            Visible: =_popup
            X: =514
            Y: =378
            ZIndex: =31

        Button4_37 As button:
            Fill: =RGBA(184, 0, 0, 1)
            OnSelect: =Set(_popup,false)
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =10
            Text: =cancelText
            Visible: =_popup
            X: =705
            Y: =378
            ZIndex: =32

        Label5_36 As label:
            Align: =Align.Center
            Height: =109
            Size: =12
            Text: =confirmationmsg
            Visible: =_popup
            Width: =525
            X: =420
            Y: =269
            ZIndex: =33

        Icon4_18 As icon.Cancel:
            Color: =RGBA(102, 102, 102, 1)
            Height: =29
            Icon: =Icon.Cancel
            OnSelect: =Set(_popup,false)
            Visible: =_popup
            Width: =32
            X: =893
            Y: =247
            ZIndex: =34

        Label5_37 As label:
            Align: =Align.Center
            Color: =RGBA(184, 0, 0, 1)
            Height: =57
            Size: =8
            Text: =worryText
            Visible: =_popup
            Width: =517
            X: =428
            Y: =427
            ZIndex: =35

        Image3_5 As image:
            Height: =80
            Image: ='Spinner-1s-200px'
            Visible: =_loader
            Width: =64
            X: =432
            Y: =360
            ZIndex: =36

    HtmlText1_3 As htmlViewer:
        Height: =50
        HtmlText: |-
            =If(lang="En","Level of Interaction  <b><font color=#6a0027>before MAMP</font></b> for ","Niveau d’interaction <b><font color=#6a0027>avant le PGAM</font></b> pour ") & myOrganizationLong 
        Size: =14
        Width: =1061
        X: =12
        Y: =21
        ZIndex: =38

    Label9_49 As label:
        Align: =Align.Center
        Color: =RGBA(184, 0, 0, 1)
        Height: =54
        OnSelect: |+
            =Set(_popup,true);
            
        Text: =savephrase
        Underline: =true
        Width: =433
        X: =496
        Y: =699
        ZIndex: =39

